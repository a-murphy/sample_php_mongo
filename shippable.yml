language: php

php: 
  - 5.5
services:
  - mongodb
before_script: 
  - composer self-update
  - pecl install xdebug-2.3.3
  - echo 'zend_extension="/usr/lib/php5/20121212/xdebug.so"' > /etc/php5/cli/php.ini
  
  - composer install --no-progress --no-interaction --prefer-source
  - php -v
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage
script:
  - phpunit  --log-junit shippable/testresults/junit.xml --coverage-xml shippable/codecoverage -c phpunit.xml 
notifications:
   email:
     on_success: 'always'
