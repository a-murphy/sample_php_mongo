language: php

php: 
  - 5.5
  - 5.6
  
build:
  ci:
    - composer self-update
    - composer install --no-progress --no-interaction --prefer-source
    - find / -name xdebug.so
    - pecl install xdebug
    - find / -name xdebug.so
    - ls /root/.phpenv/versions/$SHIPPABLE_PHP_VERSION/lib/php/extensions
    #- cp /usr/lib/php5/20121212/xdebug.so /root/.phpenv/versions/$SHIPPABLE_PHP_VERSION/lib/php/extensions/no-debug-non-zts-20151012/xdebug.so
    #- phpenv rehash
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - vendor/phpunit/phpunit/phpunit  --log-junit shippable/testresults/junit.xml --coverage-xml shippable/codecoverage -c phpunit.xml
